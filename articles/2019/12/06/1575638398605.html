<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"/><meta name="theme-color" content="#3b3e43"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="format-detection" content="telephone=no"/><title>podman 初体验 - mufengs 的个人博客</title><meta name="description" content="The best preparation for tomorrow is doing your best today."/><meta property="og:description" content="The best preparation for tomorrow is doing your best today."/>    <meta name="keywords" content="mfuengs,沐风,Solo,博客,开源"/><link rel="dns-prefetch" href="https://blog.mufengs.com"/><link rel="dns-prefetch" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="https://blog.mufengs.com"><link rel="icon" type="image/png" href="https://avatars0.githubusercontent.com/u/13534743?s=460&v=4"/><link rel="apple-touch-icon" href="https://avatars0.githubusercontent.com/u/13534743?s=460&v=4"><link rel="shortcut icon" type="image/x-icon" href="https://avatars0.githubusercontent.com/u/13534743?s=460&v=4"><meta name="copyright" content="B3log"/><meta http-equiv="Window-target" content="_top"/><meta property="og:locale" content="zh_CN"/><meta property="og:title" content="podman 初体验 - mufengs 的个人博客"/><meta property="og:site_name" content="mufengs 的个人博客"/><meta property="og:url"      content="https://blog.mufengs.com/articles/2019/12/06/1575638398605.html?"/><meta property="og:image" content="https://avatars0.githubusercontent.com/u/13534743?s=460&v=4"/><link rel="search" type="application/opensearchdescription+xml" title="podman 初体验 - mufengs 的个人博客" href="/opensearch.xml"><link href="https://blog.mufengs.com/rss.xml" title="RSS" type="application/rss+xml" rel="alternate"/><link rel="manifest" href="https://blog.mufengs.com/manifest.json">        <link rel="canonical" href="https://blog.mufengs.com/articles/2019/12/06/1575638398605.html">        <link rel="stylesheet"
              href="https://blog.mufengs.com/skins/9IPHP/css/base.css?1582365382210"/>
            <link rel="prev" title="shell 基础强化笔记 ( 二）" href="https://blog.mufengs.com/articles/2019/12/02/1575301055418.html">
            <link rel="next" title="2019 年度 mufengs 的个人总结" href="https://blog.mufengs.com/articles/2019/12/31/1577812726750.html">
    <meta name="chinaz-site-verification" content="F660A6FCE0996EE8">
<meta name="msvalidate.01" content="17F5C77D3C4574E00E1184C8C88CDF3D" />

<meta name="baidu-site-verification" content="O2dbWwPD4c" />
<meta http-equiv="Content-Language" contect="zh-CN">
<script async custom-element="amp-auto-ads"
        src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-2020382208193428",
    enable_page_level_ads: true
  });
</script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-129717363-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129717363-1');
</script>
<meta name="baidu-site-verification" content="EVS4zXFLDE" /></head>
<body>
<header>
    <div class="banner">
        <div class="fn-clear wrapper">
            <h1 class="fn-inline">
                <a href="https://blog.mufengs.com" rel="start">
                    mufengs 的个人博客
                </a>
            </h1>
            <small> &nbsp; 没有引发任何行动的思想都不是思想，而是梦想。 —— 马丁</small>
        </div>
    </div>

    <div class="navbar">
        <div class="fn-clear wrapper">
            <nav class="fn-left">
                <a href="https://blog.mufengs.com">
                    <i class="icon-home"></i>
                    首页
                </a>
                    <a href="https://my.oschina.net/mfeng" target="_blank" rel="section">
                        <img class="page-icon" src="https://static.oschina.net/new-osc/img/logo.svg">oschina
                    </a>
                    <a href="https://blog.51cto.com/10556365" target="_blank" rel="section">
                        <img class="page-icon" src="https://google.mufengs.com/images/branding/googlelogo/2x/googlelogo_color_272x92dp.png">51CTO博客
                    </a>
                    <a href="https://www.opschina.top/" target="_self" rel="section">
                        <img class="page-icon" src="https://avatars0.githubusercontent.com/u/13534743?s=460&v=4">运维中国
                    </a>
                    <a href="https://www.cnblogs.com/sunofwe/" target="_self" rel="section">
                        <img class="page-icon" src="https://www.cnblogs.com/Skins/custom/images/logo.gif">博客园
                    </a>
                    <a href="/my-github-repos" target="_self" rel="section">
                        <img class="page-icon" src="/images/github-icon.png">我的开源
                    </a>
                <a href="https://blog.mufengs.com/tags.html" rel="section">
                    <i class="icon-tags"></i> 标签墙
                </a>
                <a href="https://blog.mufengs.com/archives.html">
                    <i class="icon-inbox"></i> 存档
                </a>
                <a rel="archive" href="https://blog.mufengs.com/links.html">
                    <i class="icon-link"></i> 友情链接
                </a>
                <a rel="alternate" href="https://blog.mufengs.com/rss.xml" rel="section">
                    <i class="icon-rss"></i> RSS
                </a>
            </nav>
        </div>
    </div>
</header>
<div class="responsive fn-none">
    <i class="icon-list"></i>
    <ul class="list">
        <li>
            <a href="https://blog.mufengs.com">
                <i class="icon-home"></i>
                首页
            </a>
        </li>
            <li>
                <a href="https://my.oschina.net/mfeng" target="_blank" rel="section">
                    <img class="page-icon" src="https://static.oschina.net/new-osc/img/logo.svg">oschina
                </a>
            </li>
            <li>
                <a href="https://blog.51cto.com/10556365" target="_blank" rel="section">
                    <img class="page-icon" src="https://google.mufengs.com/images/branding/googlelogo/2x/googlelogo_color_272x92dp.png">51CTO博客
                </a>
            </li>
            <li>
                <a href="https://www.opschina.top/" target="_self" rel="section">
                    <img class="page-icon" src="https://avatars0.githubusercontent.com/u/13534743?s=460&v=4">运维中国
                </a>
            </li>
            <li>
                <a href="https://www.cnblogs.com/sunofwe/" target="_self" rel="section">
                    <img class="page-icon" src="https://www.cnblogs.com/Skins/custom/images/logo.gif">博客园
                </a>
            </li>
            <li>
                <a href="/my-github-repos" target="_self" rel="section">
                    <img class="page-icon" src="/images/github-icon.png">我的开源
                </a>
            </li>
        <li>
            <a href="https://blog.mufengs.com/tags.html" rel="section">
                <i class="icon-tags"></i> 标签墙
            </a>
        </li>
        <li>
            <a href="https://blog.mufengs.com/archives.html">
                <i class="icon-inbox"></i> 存档
            </a>
        </li>
        <li>
            <a rel="archive" href="https://blog.mufengs.com/links.html">
                <i class="icon-link"></i> 友情链接
            </a>
        </li>
        <li>
            <a rel="alternate" href="https://blog.mufengs.com/rss.xml" rel="section">
                <i class="icon-rss"></i> RSS
            </a>
        </li>
    </ul>
</div>
<div class="wrapper">
    <div class="main-wrap">
        <main>
            <article class="post">
                <header>
                    <h2>
                        <a rel="bookmark" href="https://blog.mufengs.com/articles/2019/12/06/1575638398605.html">
                            podman 初体验
                        </a>
                    </h2>
                    <div class="meta">
                                <span class="vditor-tooltipped vditor-tooltipped__n"
                                      aria-label="创建日期">
                                    <i class="icon-date"></i>
                                    <time>
                                    2019-12-06
                                    </time>
                                </span>
                        &nbsp; | &nbsp;
                        <span class="vditor-tooltipped vditor-tooltipped__n" aria-label="评论数">
                                    <i class="icon-comments"></i>
                                    <a href="https://blog.mufengs.com/articles/2019/12/06/1575638398605.html#b3logsolocomments">
                                        <span data-uvstatcmt="1575638398605">0</span> 评论</a>
                                </span>
                        &nbsp; | &nbsp;
                        <span class="vditor-tooltipped vditor-tooltipped__n" aria-label="浏览数">
                                    <i class="icon-views"></i>
                        <span data-uvstaturl="https://blog.mufengs.com/articles/2019/12/06/1575638398605.html">442</span> 浏览
                                </span>
                    </div>
                </header>

                <div class="vditor-reset post__content">
                    <h2 id="toc_h2_0">1. 概述</h2>
<p>podman官网</p>
<p><a href="https://podman.io/getting-started/" target="_blank">https://podman.io/getting-started/</a></p>
<p>写这个博客的原因是在地铁上，看到一篇博客《Docker 大势已去，Podman 万岁》，就去了解了下podman，Redhat的亲儿子。毕竟拥抱开源，拥抱k8s，pod的概念也有。</p>
<p>很多人可能遇到过开机重启时，由于Docker守护程序在占用多核CPU使用100%C使用的情况，导致所有容器都无法启动，服务都不能用的情况。过利用Docker重构WP博客的新架构。由于VPS机器不是很稳定，时常会重启，重启时候就会遇到这个事情，VPS负载很高，容器都没有起来，网站就无法访问了。这时候只能杀掉所有容器并重启守护进程，才能恢复。经过了解该问题是由于Docker守护进程引起，而且Docker守护进程是以root特权权限启动的，是一个安全问题，那么有什么方法解决呢？</p>
<p>为什么Docker需要一个守护进程呢？</p>
<blockquote>
<p>Podman，Skopeo和Buildah</p>
</blockquote>
<p>这三个工具都是符合OCI计划下的工具（github/containers）。主要是由RedHat推动的，他们配合可以完成Docker所有的功能，而且不需要守护程序或访问有root权限的组，更加安全可靠，是下一代容器容器工具</p>
<h2 id="toc_h2_1">2. 准备环境</h2>
<p>这边我购买了一台阿里云2核8G的ECS，抢占式付费模式。抢占式付费模式，比按时付费便宜，这边设置下最高竞价0.5元每小时，可以保障机器的所有权。选择aliyun linux，也就是o的一个系统，系统本身做了一些优化之类的。<br>
<img src="https://img.hacpai.com/file/2019/12/image-f703ba09.png?imageView2/2/w/1280/format/jpg/interlace/1/q/100" alt="image.png"></p>
<p>下面这张图就比较有意思了，现在很少可以买到经典网络的ECS了，除非之前有经典网络的ECS，否则默认都是专有网络。阿里云大概从2016年开始，就是按区域做网络迁移了，增强了网络隔离性。还提到设备更换，性能更好，这就不知道了。恰巧前几天，碰上了网络模式迁移这件事。有几点需要注意下的就是</p>
<p>1.RDS网络模式改成专有网络，首先需要打开白名单高安全模式（经典网络和VPC隔离），如果之前有应用链接的时候，最好迁移的时候不保留经典网络，这样链接地址不会变，不然需要修改RDS链接地址。保留的会就需要打开混淆模式，经典网络和VPC打通访问，当然这个因应用而异，也许有更无感的迁移方式。</p>
<p>2.ECS迁移，可以保留原内网地址，但是需要你建的VPC网络，包含之前内网的网段，待迁移完成之后，自行手动修改</p>
<p><img src="https://img.hacpai.com/file/2019/12/image-b64edfd6.png?imageView2/2/w/1280/format/jpg/interlace/1/q/100" alt="image.png"></p>
<p>等到所有的操作都点完之后，我们服务器环境就准备好啦</p>
<p><img src="https://img.hacpai.com/file/2019/12/image-cf4da50d.png?imageView2/2/w/1280/format/jpg/interlace/1/q/100" alt="image.png"></p>
<h3 id="toc_h3_2">3. 安装podman</h3>
<h3 id="toc_h3_3">3.1 更新操作系统</h3>
<pre><code class="language-bash">yum update -y
</code></pre>
<p>体验了一把速度还是很快的，一会会就更新完毕了</p>
<h3 id="toc_h3_4">3.2安装<code>podman</code></h3>
<pre><code class="language-bash">sudo yum -y install podman
</code></pre>
<pre><code class="language-bash">已安装:
  podman.x86_64 0:1.4.4-2.1.al7
作为依赖被安装:
  PyYAML.x86_64 0:3.10-11.1.al7                         atomic-registries.x86_64 1:1.22.1-26.gitb507039.1.al7             audit-libs-python.x86_64 0:2.8.5-4.1.al7
  checkpolicy.x86_64 0:2.5-8.1.al7                      container-selinux.noarch 2:2.107-1.1.al7                          containernetworking-plugins.x86_64 0:0.8.1-1.1.al7
  containers-common.x86_64 1:0.1.37-1.1.al7             criu.x86_64 0:3.12-2.1.al7                                        libcgroup.x86_64 0:0.41-21.1.al7
  libnet.x86_64 0:1.1.6-7.1.al7                         libsemanage-python.x86_64 0:2.5-14.1.al7                          libyaml.x86_64 0:0.1.4-11.1.al7
  policycoreutils-python.x86_64 0:2.5-33.1.al7          protobuf-c.x86_64 0:1.0.2-3.4.al7                                 python-IPy.noarch 0:0.75-6.1.al7
  python-backports.x86_64 0:1.0-8.1.al7                 python-backports-ssl_match_hostname.noarch 0:3.5.0.1-1.1.al7      python-ipaddress.noarch 0:1.0.16-2.4.al7
  python-pytoml.noarch 0:0.1.14-1.git7dea353.1.al7      python-setuptools.noarch 0:0.9.8-7.1.al7                          runc.x86_64 0:1.0.0-64.rc8.1.al7
  setools-libs.x86_64 0:3.3.8-4.1.al7

完毕！
</code></pre>
<h2 id="toc_h2_5">4. 探索podman命令</h2>
<h3 id="toc_h3_6">4.1 podman -h</h3>
<p>可以大概看出了，和docker的命令几乎是一致的</p>
<pre><code class="language-shell">manage pods and images

Usage:
  podman [flags]
  podman [command]

Available Commands:
  attach      Attach to a running container
  build       Build an image using instructions from Dockerfiles
  commit      Create new image based on the changed container
  container   Manage Containers
  cp          Copy files/folders between a container and the local filesystem
  create      Create but do not start a container
  diff        Inspect changes on container's file systems
  events      Show podman events
  exec        Run a process in a running container
  export      Export container's filesystem contents as a tar archive
  generate    Generated structured data
  healthcheck Manage Healthcheck
  help        Help about any command
  history     Show history of a specified image
  image       Manage images
  images      List images in local storage
  import      Import a tarball to create a filesystem image
  info        Display podman system information
  init        Initialize one or more containers
  inspect     Display the configuration of a container or image
  kill        Kill one or more running containers with a specific signal
  load        Load an image from container archive
  login       Login to a container registry
  logout      Logout of a container registry
  logs        Fetch the logs of a container
  mount       Mount a working container's root filesystem
  pause       Pause all the processes in one or more containers
  play        Play a pod
  pod         Manage pods
  port        List port mappings or a specific mapping for the container
  ps          List containers
  pull        Pull an image from a registry
  push        Push an image to a specified destination
  restart     Restart one or more containers
  rm          Remove one or more containers
  rmi         Removes one or more images from local storage
  run         Run a command in a new container
  save        Save image to an archive
  search      Search registry for image
  start       Start one or more containers
  stats       Display a live stream of container resource usage statistics
  stop        Stop one or more containers
  system      Manage podman
  tag         Add an additional name to a local image
  top         Display the running processes of a container
  umount      Unmounts working container's root filesystem
  unpause     Unpause the processes in one or more containers
  unshare     Run a command in a modified user namespace
  version     Display the Podman Version Information
  volume      Manage volumes
  wait        Block on one or more containers

Flags:
      --cgroup-manager string        Cgroup manager to use (cgroupfs or systemd) (default "systemd")
      --cni-config-dir string        Path of the configuration directory for CNI networks
      --config string                Path of a libpod config file detailing container server configuration options
      --conmon string                Path of the conmon binary
      --cpu-profile string           Path for the cpu profiling results
      --default-mounts-file string   Path to default mounts file
      --help                         Help for podman
      --hooks-dir strings            Set the OCI hooks directory path (may be set multiple times)
      --log-level string             Log messages above specified level: debug, info, warn, error, fatal or panic (default "error")
      --namespace string             Set the libpod namespace, used to create separate views of the containers and pods on the system
      --network-cmd-path string      Path to the command for configuring the network
      --root string                  Path to the root directory in which data, including images, is stored
      --runroot string               Path to the 'run directory' where all state information is stored
      --runtime string               Path to the OCI-compatible binary used to run containers, default is /usr/bin/runc
      --storage-driver string        Select which storage driver is used to manage storage of images and containers (default is overlay)
      --storage-opt stringArray      Used to pass an option to the storage driver
      --syslog                       Output logging information to syslog as well as the console
      --tmpdir string                Path to the tmp directory
      --trace                        Enable opentracing output
      --version                      Version for podman

Use "podman [command] --help" for more information about a command.
</code></pre>
<h3 id="toc_h3_7">4.2 常用命令</h3>
<h4 id="toc_h4_8">4.2.1 查看运行的容器</h4>
<pre><code class="language-shell">[root@podman ~]# podman ps
CONTAINER ID  IMAGE  COMMAND  CREATED  STATUS  PORTS  NAMES
</code></pre>
<h4 id="toc_h4_9">4.2.2 查看podman信息</h4>
<pre><code class="language-shell">[root@podman ~]# podman info
host:
  BuildahVersion: 1.9.0
  Conmon:
    package: podman-1.4.4-2.1.al7.x86_64
    path: /usr/libexec/podman/conmon
    version: 'conmon version 0.3.0, commit: unknown'
    ........
</code></pre>
<h4 id="toc_h4_10">4.2.3 运行一个简单的容器</h4>
<pre><code class="language-shell">podman run -dt -p 8080:8080/tcp -e HTTPD_VAR_RUN=/var/run/httpd -e HTTPD_MAIN_CONF_D_PATH=/etc/httpd/conf.d                   -e HTTPD_MAIN_CONF_PATH=/etc/httpd/conf                   -e HTTPD_CONTAINER_SCRIPTS_PATH=/usr/share/container-scripts/httpd/      httpd
</code></pre>
<p>这边我们发现网速有点慢啊，找个国内源试下</p>
<pre><code class="language-shell">mv /etc/containers/registries.conf  /etc/containers/registries.conf.bak
touch /etc/containers/registries.conf
cat &gt; /etc/containers/registries.conf &lt;&lt;EOF
unqualified-search-registries = ["docker.io"]
[[registry]]
prefix = "docker.io"
location = "******.mirror.aliyuncs.com"
EOF
</code></pre>
<p>再次运行启动容器命令,就很快了</p>
<pre><code class="language-shell">[root@podman containers]# podman run -dt -p 8080:8080/tcp -e HTTPD_VAR_RUN=/var/run/httpd -e HTTPD_MAIN_CONF_D_PATH=/etc/httpd/conf.d                   -e HTTPD_MAIN_CONF_PATH=/etc/httpd/conf                   -e HTTPD_CONTAINER_SCRIPTS_PATH=/usr/share/container-scripts/httpd/      httpd
Trying to pull docker.io/library/httpd...
Getting image source signatures
Copying blob 000eee12ec04 done
Copying blob 32b8712d1f38 done
Copying blob 51c60bde4d46 done
Copying blob f1ca037d6393 done
Copying blob c4bd3401259f done
Copying config 2ae34abc2e done
Writing manifest to image destination
Storing signatures
</code></pre>
<h4 id="toc_h4_11">4.2.4 查看镜像和容器</h4>
<pre><code class="language-shell">[root@podman containers]# podman ps
CONTAINER ID  IMAGE                           COMMAND           CREATED         STATUS             PORTS                   NAMES
845ff52751b4  docker.io/library/httpd:latest  httpd-foreground  24 seconds ago  Up 23 seconds ago  0.0.0.0:8080-&gt;8080/tcp  eager_ganguly
[root@podman containers]# podman images
REPOSITORY                TAG      IMAGE ID       CREATED      SIZE
docker.io/library/httpd   latest   2ae34abc2ed0   7 days ago   170 MB
</code></pre>
<p>我们访问下页面试下</p>
<pre><code class="language-shell">[root@podman containers]# curl -iL 127.0.0.1:8080
curl: (7) Failed connect to 127.0.0.1:8080; 拒绝连接
[root@podman containers]# netstat -ntpl
Active Internet connections (only servers)
Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name
tcp        0      0 0.0.0.0:5355            0.0.0.0:*               LISTEN      6432/systemd-resolv
tcp        0      0 0.0.0.0:8080            0.0.0.0:*               LISTEN      31319/conmon
tcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN      6361/sshd
</code></pre>
<p>What?访问被拒绝，那就查看容器日志吧</p>
<pre><code class="language-shell">[root@podman containers]# podman logs -f 845ff52751b4
AH00558: httpd: Could not reliably determine the server's fully qualified domain name, using 10.88.0.3. Set the 'ServerName' directive globally to suppress this message
AH00558: httpd: Could not reliably determine the server's fully qualified domain name, using 10.88.0.3. Set the 'ServerName' directive globally to suppress this message
[Fri Dec 06 12:36:57.794386 2019] [mpm_event:notice] [pid 1:tid 140331807290496] AH00489: Apache/2.4.41 (Unix) configured -- resuming normal operations
[Fri Dec 06 12:36:57.794512 2019] [core:notice] [pid 1:tid 140331807290496] AH00094: Command line: 'httpd -D FOREGROUND'
</code></pre>
<p>进入容器查看,可能是文件的问题😅</p>
<pre><code class="language-shell">[root@podman containers]# podman exec -it 845ff52751b4  /bin/bash
root@845ff52751b4:/usr/local/apache2# ll
</code></pre>
<p>那就简单暴力点吧</p>
<pre><code class="language-shell">podman run -d -p 80:80 httpd
[root@podman containers]# curl 127.0.0.1
&lt;html&gt;&lt;body&gt;&lt;h1&gt;It works!&lt;/h1&gt;&lt;/body&gt;&lt;/html&gt;
[root@podman containers]#
</code></pre>
<p>这边可以看到容器启动并访问成功了</p>
<pre><code class="language-shell">[root@podman containers]# podman inspect 84 | grep IPAddress\":
            "IPAddress": "10.88.0.3",
[root@podman containers]# podman inspect -l | grep IPAddress\":
            "IPAddress": "10.88.0.4",
[root@podman containers]# podman ps
CONTAINER ID  IMAGE                           COMMAND           CREATED         STATUS             PORTS                   NAMES
82d6075767be  docker.io/library/httpd:latest  httpd-foreground  4 minutes ago   Up 4 minutes ago   0.0.0.0:80-&gt;80/tcp      nostalgic_hypatia
845ff52751b4  docker.io/library/httpd:latest  httpd-foreground  20 minutes ago  Up 20 minutes ago  0.0.0.0:8080-&gt;8080/tcp  eager_ganguly
</code></pre>
<h4 id="toc_h4_12">4.2.5 备份迁移</h4>
<p>podman会先把容器打包成一个gz包，然后可以到远程服务器上导入。不知道是镜像小还是什么原因，速度很快。感觉比docker导入导出快多啦，不知道是不是错觉。</p>
<pre><code class="language-shell">[root@podman containers]# podman container checkpoint 82d6075767be -e /tmp/checkpoint.tar.gz
82d6075767beff34a168ca48e47c5155bcd714eac1a53054049fbb841535832e
[root@podman containers]# ll /tmp/
总用量 1040
srwxr-xr-x 1 root root       0 12月  6 19:51 Aegis-&lt;Guid(5A2C30A2-A87D-490A-9281-6765EDAD7CBA)&gt;
-rw------- 1 root root 1058827 12月  6 21:01 checkpoint.tar.gz
drwx------ 3 root root    4096 12月  6 20:10 systemd-private-1254221ee241484f88bf1a3a3b2fa29b-chronyd.service-i0zmSw
[root@podman containers]# podman rm -f 82d6075767be
82d6075767beff34a168ca48e47c5155bcd714eac1a53054049fbb841535832e
[root@podman containers]# podman ps
CONTAINER ID  IMAGE                           COMMAND           CREATED         STATUS             PORTS                   NAMES
845ff52751b4  docker.io/library/httpd:latest  httpd-foreground  25 minutes ago  Up 25 minutes ago  0.0.0.0:8080-&gt;8080/tcp  eager_ganguly
[root@podman containers]# podman container restore -i /tmp/checkpoint.tar.gz
82d6075767beff34a168ca48e47c5155bcd714eac1a53054049fbb841535832e
[root@podman containers]# curl 127.0.0.1
&lt;html&gt;&lt;body&gt;&lt;h1&gt;It works!&lt;/h1&gt;&lt;/body&gt;&lt;/html&gt;
[root@podman containers]#
</code></pre>
                        <div>
                            ---------------------------------------------------------------</br>
>>  博客地址：<a href="https://blog.mufengs.com" target="_blank">https://blog.mufengs.com</a></br>
>>  邮箱地址：<a href=mailto:mufeng5619@gmail.com target="_blank">mufeng5619@gmail.com</a></br>
>>  微信帐号：Do8080</br>
>>    Github       :  <a href="https://github.com/mufengcoding" target="_blank">https://github.com/mufengcoding</a></br>
---------------------------------------------------------------</br>
                        </div>
                </div>

                <footer class="tags">
                        <a class="tag" rel="tag" href="https://blog.mufengs.com/tags/Linux">
                            Linux</a>
                        <a class="tag" rel="tag" href="https://blog.mufengs.com/tags/Podman">
                            Podman</a>
                        <a class="tag" rel="tag" href="https://blog.mufengs.com/tags/Docker">
                            Docker</a>

                    <div class="rel fn-clear ft__center">
                            <a href="https://blog.mufengs.com/articles/2019/12/02/1575301055418.html" rel="prev"
                               class="fn-left vditor-tooltipped vditor-tooltipped__n"
                               aria-label="shell 基础强化笔记 ( 二）">
                                旧一篇
                            </a>
<div class="article__share"
     data-title="podman 初体验"
     data-blogtitle="mufengs 的个人博客"
     data-url="https://blog.mufengs.com/articles/2019/12/06/1575638398605.html"
     data-avatar="https://img.hacpai.com/avatar/1522743072387_1529850525222.?imageView2/1/w/128/h/128/format/jpg/interlace/0/q/100">
    <span class="item" data-type="qqz">
        <svg viewBox="0 0 32 32" width="100%" height="100%">
            <path d="M22.824 13.989l-8.348 6.287s3.351 0.522 8.404 0.461l-0.23-1.040 7.2-6.549c0.132-0.12 0.183-0.312 0.129-0.487s-0.203-0.299-0.377-0.314l-9.492-0.856-3.708-9.213c-0.068-0.169-0.226-0.279-0.401-0.279s-0.333 0.11-0.401 0.279l-3.708 9.213-9.492 0.856c-0.174 0.015-0.323 0.139-0.377 0.314s-0.004 0.366 0.129 0.487l7.2 6.549-2.158 9.742c-0.040 0.178 0.026 0.365 0.168 0.474 0.142 0.107 0.331 0.115 0.481 0.021l8.158-5.165 8.158 5.165c0.070 0.045 0.147 0.066 0.225 0.066 0.090 0 0.18-0.029 0.256-0.086 0.142-0.109 0.208-0.295 0.168-0.474l-1.707-7.704c0.732-0.386 1.538-1.040 1.538-1.040s-3.195 1.638-14.664 0.838l8.312-6.325s-0.327-0.534-10.744-0.914c-0.697-0.026 8.493-1.83 15.281-0.305z"></path>
        </svg>
    </span>
    <span class="item" data-type="wechat">
        <svg viewBox="0 0 32 32" width="100%" height="100%">
            <path d="M9.062 9.203c0-0.859-0.562-1.422-1.422-1.422-0.844 0-1.703 0.562-1.703 1.422 0 0.844 0.859 1.406 1.703 1.406 0.859 0 1.422-0.562 1.422-1.406zM20.672 17.125c0-0.562-0.562-1.125-1.422-1.125-0.562 0-1.125 0.562-1.125 1.125 0 0.578 0.562 1.141 1.125 1.141 0.859 0 1.422-0.562 1.422-1.141zM16.984 9.203c0-0.859-0.562-1.422-1.406-1.422-0.859 0-1.703 0.562-1.703 1.422 0 0.844 0.844 1.406 1.703 1.406 0.844 0 1.406-0.562 1.406-1.406zM26.906 17.125c0-0.562-0.578-1.125-1.422-1.125-0.562 0-1.125 0.562-1.125 1.125 0 0.578 0.562 1.141 1.125 1.141 0.844 0 1.422-0.562 1.422-1.141zM22.75 10.922c-0.359-0.047-0.719-0.063-1.094-0.063-5.375 0-9.625 4.016-9.625 8.953 0 0.828 0.125 1.625 0.359 2.375-0.359 0.031-0.703 0.047-1.063 0.047-1.422 0-2.547-0.281-3.969-0.562l-3.953 1.984 1.125-3.406c-2.828-1.984-4.531-4.547-4.531-7.656 0-5.391 5.094-9.625 11.328-9.625 5.563 0 10.453 3.391 11.422 7.953zM32 19.687c0 2.547-1.688 4.813-3.969 6.516l0.859 2.828-3.109-1.703c-1.141 0.281-2.281 0.578-3.406 0.578-5.391 0-9.625-3.688-9.625-8.219s4.234-8.219 9.625-8.219c5.094 0 9.625 3.688 9.625 8.219z"></path>
        </svg>
    </span>
    <span class="item" data-type="weibo">
        <svg viewBox="0 0 32 32" width="100%" height="100%">
            <path d="M13.444 27.064c-5.3 0.525-9.875-1.875-10.219-5.35-0.344-3.481 3.675-6.719 8.969-7.244 5.3-0.525 9.875 1.875 10.212 5.35 0.35 3.481-3.669 6.725-8.963 7.244zM24.038 15.521c-0.45-0.137-0.762-0.225-0.525-0.819 0.512-1.287 0.563-2.394 0.006-3.188-1.038-1.481-3.881-1.406-7.137-0.037 0 0-1.025 0.444-0.762-0.363 0.5-1.613 0.425-2.956-0.356-3.737-1.769-1.769-6.469 0.069-10.5 4.1-3.013 3.006-4.763 6.212-4.763 8.981 0 5.287 6.787 8.506 13.425 8.506 8.7 0 14.494-5.056 14.494-9.069 0-2.431-2.044-3.806-3.881-4.375z"></path>
            <path d="M29.819 5.833c-2.1-2.331-5.2-3.219-8.063-2.612v0c-0.663 0.144-1.081 0.794-0.938 1.45 0.144 0.662 0.788 1.081 1.45 0.938 2.038-0.431 4.238 0.2 5.731 1.856s1.9 3.913 1.256 5.888v0c-0.206 0.644 0.144 1.331 0.788 1.544 0.644 0.206 1.331-0.144 1.544-0.787v-0.006c0.9-2.762 0.331-5.938-1.769-8.269z"></path>
            <path d="M26.588 8.752c-1.025-1.138-2.538-1.569-3.925-1.269-0.569 0.119-0.931 0.688-0.813 1.256 0.125 0.569 0.688 0.931 1.25 0.806v0c0.681-0.144 1.419 0.069 1.919 0.619 0.5 0.556 0.637 1.313 0.419 1.975v0c-0.175 0.55 0.125 1.15 0.681 1.331 0.556 0.175 1.15-0.125 1.331-0.681 0.438-1.356 0.163-2.906-0.863-4.037z"></path>
            <path d="M13.738 20.771c-0.188 0.319-0.594 0.469-0.912 0.337-0.319-0.125-0.412-0.488-0.231-0.794 0.188-0.306 0.581-0.456 0.894-0.337 0.313 0.113 0.425 0.469 0.25 0.794zM12.044 22.933c-0.512 0.819-1.613 1.175-2.438 0.8-0.813-0.369-1.056-1.319-0.544-2.119 0.506-0.794 1.569-1.15 2.388-0.806 0.831 0.356 1.1 1.3 0.594 2.125zM13.969 17.146c-2.519-0.656-5.369 0.6-6.463 2.819-1.119 2.262-0.037 4.781 2.506 5.606 2.638 0.85 5.75-0.456 6.831-2.894 1.069-2.394-0.262-4.85-2.875-5.531z"></path>
        </svg>
    </span>
    <span class="item" data-type="twitter">
        <svg viewBox="0 0 32 32" width="100%" height="100%">
            <path d="M32.003 6.075c-1.175 0.525-2.444 0.875-3.769 1.031 1.356-0.813 2.394-2.1 2.887-3.631-1.269 0.75-2.675 1.3-4.169 1.594-1.2-1.275-2.906-2.069-4.794-2.069-3.625 0-6.563 2.938-6.563 6.563 0 0.512 0.056 1.012 0.169 1.494-5.456-0.275-10.294-2.888-13.531-6.862-0.563 0.969-0.887 2.1-0.887 3.3 0 2.275 1.156 4.287 2.919 5.463-1.075-0.031-2.087-0.331-2.975-0.819 0 0.025 0 0.056 0 0.081 0 3.181 2.263 5.838 5.269 6.437-0.55 0.15-1.131 0.231-1.731 0.231-0.425 0-0.831-0.044-1.237-0.119 0.838 2.606 3.263 4.506 6.131 4.563-2.25 1.762-5.075 2.813-8.156 2.813-0.531 0-1.050-0.031-1.569-0.094 2.913 1.869 6.362 2.95 10.069 2.95 12.075 0 18.681-10.006 18.681-18.681 0-0.287-0.006-0.569-0.019-0.85 1.281-0.919 2.394-2.075 3.275-3.394z"></path>
        </svg>
    </span>
    <span class="item__qr"></span>
</div>                            <a href="https://blog.mufengs.com/articles/2019/12/31/1577812726750.html" rel="next"
                               class="fn-right vditor-tooltipped vditor-tooltipped__n"
                               aria-label="2019 年度 mufengs 的个人总结">
                                新一篇
                            </a>
                    </div>
                </footer>
                    <div id="b3logsolocomments"></div>
                    <div id="vcomment" data-name="mufengcoding" data-postId="1575638398605"></div>
                <br>
                <div id="externalRelevantArticles" class="list"></div>
                <div id="relevantArticles" class="list"></div>
                <div id="randomArticles" class="list"></div>
            </article>
        </main>
<aside>
<ul class="article__toc">
        <li class="toc__h2">
            <a href="#toc_h2_0">1. 概述</a>
        </li>
        <li class="toc__h2">
            <a href="#toc_h2_1">2. 准备环境</a>
        </li>
        <li class="toc__h3">
            <a href="#toc_h3_2">3. 安装podman</a>
        </li>
        <li class="toc__h3">
            <a href="#toc_h3_3">3.1 更新操作系统</a>
        </li>
        <li class="toc__h3">
            <a href="#toc_h3_4">3.2安装podman</a>
        </li>
        <li class="toc__h2">
            <a href="#toc_h2_5">4. 探索podman命令</a>
        </li>
        <li class="toc__h3">
            <a href="#toc_h3_6">4.1 podman -h</a>
        </li>
        <li class="toc__h3">
            <a href="#toc_h3_7">4.2 常用命令</a>
        </li>
        <li class="toc__h4">
            <a href="#toc_h4_8">4.2.1 查看运行的容器</a>
        </li>
        <li class="toc__h4">
            <a href="#toc_h4_9">4.2.2 查看podman信息</a>
        </li>
        <li class="toc__h4">
            <a href="#toc_h4_10">4.2.3 运行一个简单的容器</a>
        </li>
        <li class="toc__h4">
            <a href="#toc_h4_11">4.2.4 查看镜像和容器</a>
        </li>
        <li class="toc__h4">
            <a href="#toc_h4_12">4.2.5 备份迁移</a>
        </li>
</ul></aside>
    </div>
</div>
<footer class="footer fn-clear">
    &copy; 2020
    <a href="https://blog.mufengs.com">mufengs 的个人博客</a>
    <script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?1d1cd729cc56392a866f3afd3b3eed58";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>
<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>
    <br/>
    Powered by <a href="https://solo.b3log.org" target="_blank">Solo</a>
    <span class="ft-warn">&heartsuit;</span>
    Theme 9IPHP
    <sup>[<a href="https://github.com/9IPHP/9IPHP" target="_blank">ref</a>]</sup>
    by <a href="http://vanessa.b3log.org" target="_blank">Vanessa</a>
</footer>
<div class="icon-up" onclick="Util.goTop()"></div>
<script>
  var Label = {
    servePath: "https://blog.mufengs.com",
    staticServePath: "https://blog.mufengs.com",
    luteAvailable: false,
    hljsStyle: 'github',
    langLabel: "zh_CN",
    version: "3.9.0",
    staticSite: true,
    showCodeBlockLn: true,
  }
</script>
<script src="https://blog.mufengs.com/skins/9IPHP/js/common.min.js?1582365382210"></script>

<script type="text/javascript">
    Util.addScript('https://blog.mufengs.com/js/page.min.js?1582365382210', 'soloPageScript')
    var page = new Page({
        "commentContentCannotEmptyLabel": "评论内容只能为 2 到 500 个字符！",
        "oId": "1575638398605",
        "blogHost": "https://blog.mufengs.com",
        "randomArticles1Label": "随机阅读：",
        "externalRelevantArticles1Label": "站外相关阅读："
    });
    $(document).ready(function () {
        page.load();
    page.tips.externalRelevantArticlesDisplayCount = "5";
        page.loadExternalRelevantArticles("Linux,Podman,Docker", "<header class='title'><h2>站外相关阅读</h2></header>");
    Skin.initToc()
    page.share()
    });
</script>
</body>
</html>

<!-- Generated by Latke (https://github.com/88250/latke) in 95ms, 2020/02/22 05:02:44 -->